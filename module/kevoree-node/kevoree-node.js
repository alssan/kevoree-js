;(function () {
	var Class               = require('pseudoclass'),
        AdaptationEngine    = require('./lib/AdaptationEngine'),
        log                 = require('npmlog'),

        TAG                 = 'JavascriptNode';

    var JavascriptNode = Class({
        toString: TAG,

        construct: function () {
            log.heading = 'kevoree';

            this.adaptationEngine = new AdaptationEngine(this);
            this.kCore = null;
        },

        startNode: function () {
            log.info(TAG, 'started');
        },

        stopNode: function () {
            log.info(TAG, 'stopped');
        },

        updateNode: function () {
            log.info(TAG, 'updated');
        },

        setKevoreeCore: function (kCore) {
            this.kCore = kCore;
        },

        getKevoreeCore: function () {
            return this.kCore;
        },

        /**
         * Process traces in order to do the adaptation logic on the current node
         * @param traces diff traces generated by comparing current KevoreeCore model and given model
         * @param model toDeploy model used by KevoreeCore to generate the trace
         * @returns {Array}
         */
        processTraces: function (traces, model) {
            return this.adaptationEngine.processTraces(traces, model);
        }
    });

	module.exports = JavascriptNode;
})();